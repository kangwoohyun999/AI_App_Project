{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SectionList from \"react-native-web/dist/exports/SectionList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { getEntries, clearEntries } from \"../utils/storage\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function HistoryScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    sections = _useState2[0],\n    setSections = _useState2[1];\n  useEffect(function () {\n    var fetch = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var all = yield getEntries();\n        var map = {};\n        all.forEach(function (e) {\n          var d = e.date.slice(0, 10);\n          if (!map[d]) map[d] = [];\n          map[d].push(e);\n        });\n        var secs = Object.keys(map).sort(function (a, b) {\n          return b.localeCompare(a);\n        }).map(function (d) {\n          return {\n            title: d,\n            data: map[d].sort(function (a, b) {\n              return new Date(b.date) - new Date(a.date);\n            })\n          };\n        });\n        setSections(secs);\n      });\n      return function fetch() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetch();\n    var unsub = navigation.addListener('focus', fetch);\n    return unsub;\n  }, [navigation]);\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"\\uC9C0\\uB09C \\uB0B4\\uC6A9\"\n    }), _jsx(SectionList, {\n      sections: sections,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderSectionHeader: function renderSectionHeader(_ref3) {\n        var section = _ref3.section;\n        return _jsx(View, {\n          style: styles.sectionHeader,\n          children: _jsx(Text, {\n            style: styles.sectionTitle,\n            children: section.title\n          })\n        });\n      },\n      renderItem: function renderItem(_ref4) {\n        var item = _ref4.item;\n        return _jsxs(View, {\n          style: styles.item,\n          children: [_jsx(Text, {\n            style: styles.time,\n            children: new Date(item.date).toLocaleTimeString()\n          }), _jsx(Text, {\n            style: styles.text,\n            children: item.text\n          }), _jsxs(Text, {\n            style: styles.meta,\n            children: [\"\\uD0A4\\uC6CC\\uB4DC: \", item.keywords.join(', ') || '없음', \" | \\uAC10\\uC815: \", item.sentiment.label]\n          })]\n        });\n      },\n      ListEmptyComponent: _jsx(Text, {\n        style: styles.empty,\n        children: \"\\uAE30\\uB85D\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n      })\n    }), _jsxs(View, {\n      style: styles.footer,\n      children: [_jsx(TouchableOpacity, {\n        style: styles.btn,\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: _jsx(Text, {\n          style: styles.btnText,\n          children: \"\\uB4A4\\uB85C\"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: [styles.btn, {\n          backgroundColor: '#8b0000'\n        }],\n        onPress: _asyncToGenerator(function* () {\n          yield clearEntries();\n          setSections([]);\n        }),\n        children: _jsx(Text, {\n          style: styles.btnText,\n          children: \"\\uC804\\uCCB4 \\uC0AD\\uC81C\"\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#0f0b12',\n    padding: 12\n  },\n  title: {\n    color: '#fff',\n    fontSize: 20,\n    textAlign: 'center',\n    marginBottom: 10\n  },\n  sectionHeader: {\n    backgroundColor: '#121018',\n    padding: 8,\n    borderRadius: 6,\n    marginVertical: 6\n  },\n  sectionTitle: {\n    color: '#fff'\n  },\n  item: {\n    backgroundColor: '#1b1620',\n    padding: 10,\n    borderRadius: 8,\n    marginBottom: 8\n  },\n  time: {\n    color: '#ccc',\n    fontSize: 12,\n    marginBottom: 6\n  },\n  text: {\n    color: '#fff'\n  },\n  meta: {\n    color: '#bbb',\n    fontSize: 12,\n    marginTop: 6\n  },\n  empty: {\n    color: '#ccc',\n    textAlign: 'center',\n    marginTop: 40\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 10\n  },\n  btn: {\n    flex: 1,\n    backgroundColor: '#2a2430',\n    padding: 12,\n    borderRadius: 8,\n    marginHorizontal: 6,\n    alignItems: 'center'\n  },\n  btnText: {\n    color: '#fff'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","SafeAreaView","View","Text","SectionList","TouchableOpacity","StyleSheet","getEntries","clearEntries","jsx","_jsx","jsxs","_jsxs","HistoryScreen","_ref","navigation","_useState","_useState2","_slicedToArray","sections","setSections","fetch","_ref2","_asyncToGenerator","all","map","forEach","e","d","date","slice","push","secs","Object","keys","sort","a","b","localeCompare","title","data","Date","apply","arguments","unsub","addListener","style","styles","container","children","keyExtractor","item","id","renderSectionHeader","_ref3","section","sectionHeader","sectionTitle","renderItem","_ref4","time","toLocaleTimeString","text","meta","keywords","join","sentiment","label","ListEmptyComponent","empty","footer","btn","onPress","goBack","btnText","backgroundColor","create","flex","padding","color","fontSize","textAlign","marginBottom","borderRadius","marginVertical","marginTop","flexDirection","justifyContent","marginHorizontal","alignItems"],"sources":["/Users/youlim/Documents/GitHub/AI_App_Project/Today_Condition/screens/HistoryScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { SafeAreaView, View, Text, SectionList, TouchableOpacity, StyleSheet } from 'react-native';\nimport { getEntries, clearEntries } from '../utils/storage';\n\nexport default function HistoryScreen({ navigation }) {\n  const [sections, setSections] = useState([]);\n\n  useEffect(() => {\n    const fetch = async () => {\n      const all = await getEntries();\n      const map = {};\n      all.forEach(e => {\n        const d = e.date.slice(0,10);\n        if (!map[d]) map[d] = [];\n        map[d].push(e);\n      });\n      const secs = Object.keys(map).sort((a,b)=>b.localeCompare(a)).map(d => ({\n        title: d,\n        data: map[d].sort((a,b)=>new Date(b.date)-new Date(a.date))\n      }));\n      setSections(secs);\n    };\n    fetch();\n    const unsub = navigation.addListener('focus', fetch);\n    return unsub;\n  }, [navigation]);\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <Text style={styles.title}>지난 내용</Text>\n      <SectionList\n        sections={sections}\n        keyExtractor={(item) => item.id}\n        renderSectionHeader={({section}) => <View style={styles.sectionHeader}><Text style={styles.sectionTitle}>{section.title}</Text></View>}\n        renderItem={({item}) => (\n          <View style={styles.item}>\n            <Text style={styles.time}>{new Date(item.date).toLocaleTimeString()}</Text>\n            <Text style={styles.text}>{item.text}</Text>\n            <Text style={styles.meta}>키워드: {item.keywords.join(', ') || '없음'} | 감정: {item.sentiment.label}</Text>\n          </View>\n        )}\n        ListEmptyComponent={<Text style={styles.empty}>기록이 없습니다.</Text>}\n      />\n\n      <View style={styles.footer}>\n        <TouchableOpacity style={styles.btn} onPress={() => navigation.goBack()}><Text style={styles.btnText}>뒤로</Text></TouchableOpacity>\n        <TouchableOpacity style={[styles.btn, { backgroundColor:'#8b0000' }]} onPress={async () => { await clearEntries(); setSections([]); }}><Text style={styles.btnText}>전체 삭제</Text></TouchableOpacity>\n      </View>\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex:1, backgroundColor:'#0f0b12', padding:12 },\n  title: { color:'#fff', fontSize:20, textAlign:'center', marginBottom:10 },\n  sectionHeader: { backgroundColor:'#121018', padding:8, borderRadius:6, marginVertical:6 },\n  sectionTitle: { color:'#fff' },\n  item: { backgroundColor:'#1b1620', padding:10, borderRadius:8, marginBottom:8 },\n  time: { color:'#ccc', fontSize:12, marginBottom:6 },\n  text: { color:'#fff' },\n  meta: { color:'#bbb', fontSize:12, marginTop:6 },\n  empty: { color:'#ccc', textAlign:'center', marginTop:40 },\n  footer: { flexDirection:'row', justifyContent:'space-between', marginTop:10 },\n  btn: { flex:1, backgroundColor:'#2a2430', padding:12, borderRadius:8, marginHorizontal:6, alignItems:'center' },\n  btnText: { color:'#fff' }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}